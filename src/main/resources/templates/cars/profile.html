<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${car.make.name} + ' ' + ${car.model} + ' â€” Car Rental Service'"></title>
    <link rel="stylesheet" th:href="@{/css/styles-common.css}">
    <link rel="stylesheet" th:href="@{/css/styles-header.css}">
    <link rel="stylesheet" sec:authorize="isAuthenticated()" th:href="@{/css/styles-form.css}">
</head>
<body>

<header>
    <div th:insert="fragments/header.html :: pages"></div>
    <div th:insert="fragments/header.html :: updateCar"></div>
</header>

<div class="container">

    <h1 th:text="${car.make.name} + ' ' + ${car.model}"></h1>

    <section>
        <label class="field">
            <span th:text="${'Available: ' + (car.available ? 'Yes' : 'No')}"></span>
        </label>
    </section>

    <section>
        <h2>Details</h2>

        <div th:if="${car.titleImage}" class="title-image">
            <span class="field">Title image:</span>
            <img th:src="${car.titleImage.url}" alt="Title image">
        </div>

        <div th:if="${car.images != null and !#lists.isEmpty(car.images)}" class="image-gallery">
            <h3>Gallery</h3>
            <ul>
                <li th:each="image : ${car.images}">
                    <div class="image-container">
                        <img th:src="${image.url}" alt="Image">
                    </div>
                    <span th:text="'Uploaded at: ' + ${image.uploadedAt}"></span>
                </li>
            </ul>
        </div>

        <label class="field">
            <span>Make:</span>
            <span th:text="${car.make.name}"></span>
        </label>

        <label class="field">
            <span>Model:</span>
            <span th:text="${car.model}"></span>
        </label>

        <label class="field">
            <span>Type:</span>
            <span th:text="${car.carType.name}"></span>
        </label>

        <label class="field">
            <span>Engine:</span>
            <span th:text="${car.engine.name}"></span>
        </label>

        <label class="field">
            <span>Year:</span>
            <span th:text="${car.year}"></span>
        </label>

        <label class="field">
            <span>License plate:</span>
            <span th:text="${car.licensePlate}"></span>
        </label>
    </section>

    <section th:if="${car.information}">
        <h2>Additional Information</h2>
        <ul>
            <li th:if="${car.information.description}" th:text="'Description: ' + ${car.information.description}"></li>
            <li th:if="${car.information.color}" th:text="'Color: ' + ${car.information.color}"></li>
            <li th:if="${car.information.seats}" th:text="'Seats: ' + ${car.information.seats}"></li>
            <li th:if="${car.information.mileage}" th:text="'Mileage: ' + ${car.information.mileage}"></li>
            <li th:if="${car.information.fuelType}" th:text="'Fuel type: ' + ${car.information.fuelType}"></li>
            <li th:if="${car.information.transmission}"
                th:text="'Transmission: ' + ${car.information.transmission}"></li>
        </ul>
    </section>

    <section sec:authorize="isAuthenticated()">
        <label class="field">
            <span>Cost per day:</span>
            <span th:text="${car.cost}"></span>
        </label>

        <form method="post" th:action="@{/rentals/create}" class="edit-form">
            <div class="form-group">
                <label for="carId" hidden="hidden"></label>
                <input type="text" th:value="${car.id}" name="carId" id="carId" hidden="hidden">

                <label for="startDate">Start date:</label>
                <input type="date" name="startDate" id="startDate"
                       th:value="${payload != null ? payload.startDate : ''}" required>
            </div>
            <br>
            <div class="form-group">
                <label for="endDate">End date:</label>
                <input type="date" name="endDate" id="endDate"
                       th:value="${payload != null ? payload.endDate : ''}" required>
            </div>
            <br>
            <div class="form-actions">
                <button type="submit">Rent</button>
            </div>
        </form>
    </section>
</div>

</body>
</html>
