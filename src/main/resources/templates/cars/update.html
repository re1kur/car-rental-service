<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Update ' + ${car.make.name} + ' ' + ${car.model} + ' â€” Car Rental Service'"></title>
    <link rel="stylesheet" th:href="@{/css/styles-common.css}">
    <link rel="stylesheet" th:href="@{/css/styles-form.css}">
    <link rel="stylesheet" th:href="@{/css/styles-header.css}">
</head>
<body>

<header th:insert="fragments/header.html :: pages"></header>

<div class="container edit-create-wrapper">
    <form class="edit-form" method="post" th:action="@{/cars/{id}/update(id=${car.id})}">
        <h2>Common</h2>
        <section>
            <div class="form-group">
                <label for="makeId">Make:</label>
                <select id="makeId" name="makeId" required>
                    <option value="" disabled selected>Choose the make</option>
                    <option th:each="make : ${makes}"
                            th:value="${make.id}"
                            th:text="${make.name}"
                            th:selected="${car.make.id == make.id}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="carTypeId">Type of car:</label>
                <select id="carTypeId" name="carTypeId" required>
                    <option value="" disabled selected>Choose the type</option>
                    <option th:each="carType : ${carTypes}"
                            th:value="${carType.id}"
                            th:text="${carType.name}"
                            th:selected="${car.carTypeId == carType.id}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="engineId">Engine:</label>
                <select id="engineId" name="engineId" required>
                    <option value="" disabled selected>Choose the engine</option>
                    <option th:each="engine : ${engines}"
                            th:value="${engine.id}"
                            th:text="${engine.name}"
                            th:selected="${car.engineId == engine.id}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="model">Model:</label>
                <input type="text" name="model" id="model"
                       th:value="${car.model}" placeholder="Camry" required>
            </div>

            <div class="form-group">
                <label for="year">Year:</label>
                <input type="text" name="year" id="year"
                       th:value="${car.year}" placeholder="____" maxlength="4" required>
            </div>

            <div class="form-group">
                <label for="licensePlate">License plate:</label>
                <input type="text" name="licensePlate" id="licensePlate"
                       th:value="${car.licensePlate}" placeholder="AAA111" required>
            </div>

            <section th:if="${car.titleImage}">
                <label>Current title image:</label>
                <img th:src="${car.titleImage.url}" alt="Current title image" class="image-container">
            </section>

            <section th:if="${car.images != null and !#lists.isEmpty(car.images)}">
                <label>Select a new title image:</label>
                <div th:each="image : ${car.images}">
                    <label th:for="${'image_' + image.id}">
                        <input type="radio" name="titleImageId"
                               th:id="${'image_' + image.id}"
                               th:value="${image.id}"
                               th:checked="${car.titleImage != null and car.titleImage.id == image.id}">
                        <img th:src="${image.url}" alt="Image option" class="image-container">
                        <span th:text="'Uploaded at: ' + ${image.uploadedAt}"></span>
                    </label>
                </div>
            </section>
        </section>

        <section th:if="${car.information}">
            <h3>Information</h3>

            <div class="form-group">
                <label for="description">Description:</label>
                <textarea name="description" id="description" rows="4" cols="80"
                          placeholder="Did not beaten." th:text="${car.information.description}"></textarea>
            </div>

            <div class="form-group">
                <label for="color">Color:</label>
                <input type="text" name="color" id="color" th:value="${car.information.color}" placeholder="Red">
            </div>

            <div class="form-group">
                <label for="mileage">Mileage:</label>
                <input type="text" name="mileage" id="mileage" th:value="${car.information.mileage}" placeholder="5000">
            </div>

            <div class="form-group">
                <label for="seats">Seats:</label>
                <input type="text" name="seats" id="seats" th:value="${car.information.seats}" placeholder="5">
            </div>

            <div class="form-group">
                <label for="fuelType">Fuel type:</label>
                <select id="fuelType" name="fuelType">
                    <option th:value="''" th:selected="${car.information.fuelType == null}">Nothing chosen</option>
                    <option th:value="'Gasoline'" th:text="'Gasoline'" th:selected="${car.information.fuelType == 'Gasoline'}"></option>
                    <option th:value="'Diesel'" th:text="'Diesel'" th:selected="${car.information.fuelType == 'Diesel'}"></option>
                    <option th:value="'Ethanol'" th:text="'Ethanol'" th:selected="${car.information.fuelType == 'Ethanol'}"></option>
                    <option th:value="'Electric'" th:text="'Electric'" th:selected="${car.information.fuelType == 'Electric'}"></option>
                    <option th:value="'Hybrid electric'" th:text="'Hybrid electric'" th:selected="${car.information.fuelType == 'Hybrid electric'}"></option>
                    <option th:value="'Natural gas'" th:text="'Natural gas'" th:selected="${car.information.fuelType == 'Natural gas'}"></option>
                </select>
            </div>

            <div class="form-group">
                <label for="transmission">Transmission:</label>
                <select id="transmission" name="transmission">
                    <option th:value="''" th:selected="${car.information.transmission == null}">Nothing chosen</option>
                    <option th:value="'Automatic transmission'" th:selected="${car.information.transmission == 'Automatic transmission'}">Automatic transmission</option>
                    <option th:value="'Manual transmission'" th:selected="${car.information.transmission == 'Manual transmission'}">Manual transmission</option>
                    <option th:value="'Semi-automatic transmission'" th:selected="${car.information.transmission == 'Semi-automatic transmission'}">Semi-automatic transmission</option>
                </select>
            </div>
        </section>

        <div class="form-actions">
            <button type="submit">Update</button>
        </div>
    </form>
</div>

</body>
</html>