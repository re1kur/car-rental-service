<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cars &ndash; Car Rental Service</title>
</head>
<body>
<div>
    <section>
        <form th:action="@{/cars/list}" method="get">
            <div>
                <label for="model">Model:</label>
                <input type="text" name="model" id="model"
                       th:value="${filter.model}" placeholder="Enter model">
            </div>

            <div>
                <label for="make">Make:</label>
                <select id="make" name="makeId">
                    <option value="">Select a make</option>
                    <option th:each="make : ${makes}" th:value="${make.id}" th:text="${make.name}"
                            th:selected="${filter.makeId == make.id}"></option>
                </select>
            </div>

            <div>
                <label for="year">Year:</label>
                <input type="number" id="year" name="year"
                       th:value="${filter.year}" placeholder="Enter year">
            </div>

            <button type="submit">Find</button>
        </form>
    </section>
</div>
<div>
    <table th:if="${page.content.empty}">
        <thead>
        <tr>
            <th>Message</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Cars are not found.</td>
        </tr>
        </tbody>
    </table>
    <div th:each="car : ${page.content}">
        <article>
            <h2 th:text="${car.make.name} + ' ' + ${car.model}"></h2>
            <section>
                <div>
                    <div>
                        <p th:text="'Make: ' + (${car.make.name})"></p>
                        <p th:text="'Type: ' + (${car.carType.name})"></p>
                        <p th:text="'Engine: ' + (${car.engine.name})"></p>
                        <p th:text="'Year: ' + ${car.year}"></p>
                        <p th:text="'License plate: ' + ${car.licensePlate}"></p>
                    </div>
                    <div th:if="${car.titleImage != null}">
                        <img th:src="${car.titleImage.url}" alt="Car Image">
                    </div>
                </div>
            </section>
            <a th:href="@{/cars/{id}(id=${car.id})}">Profile</a>
        </article>
        <hr>
    </div>
</div>
</body>
<footer th:if="${!page.content.empty}">
    <nav aria-label="Pagination">
        <div>
            <label>
                <a th:href="${page.prevNumber != null ? '/cars/list?'
                 + 'page=' + page.prevNumber
                 + '&model=' + filter.model
                 + '&makeId=' + (filter.makeId != null ? filter.makeId : '')
                 + '&year=' + (filter.year != null ? filter.year : '') : '#'}"
                   class="page-link"
                   th:text="'Previous'">
                </a>
            </label>

            <label th:each="pageNumber : ${#numbers.sequence(page.firstNumber, page.lastNumber)}">
                <a th:href="@{/cars/list(
                    page=${pageNumber},
                    model=${filter.model},
                    makeId=${filter.makeId},
                    year=${filter.year != null ? filter.year : ''})}"
                   th:text="${pageNumber + 1}">
                </a>
            </label>

            <label>
                <a th:href="${page.nextNumber != null ? '/cars/list?'
                 + 'page=' + page.nextNumber
                 + '&model=' + (filter.model != null ? filter.model : '')
                 + '&makeId=' + (filter.makeId != null ? filter.makeId : '')
                 + '&year=' + (filter.year != null ? filter.year : '') : '#'}"
                   class="page-link"
                   th:text="'Next'">
                </a>
            </label>
        </div>
    </nav>
</footer>

</html>